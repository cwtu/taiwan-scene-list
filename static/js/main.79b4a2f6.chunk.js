(this["webpackJsonptaiwan-scene-searchup"]=this["webpackJsonptaiwan-scene-searchup"]||[]).push([[0],{12:function(e,n,t){},15:function(e,n,t){"use strict";t.r(n);var c=t(2),i=t(6),r=t.n(i),s=(t(12),t(1)),a=t(4),o=t.n(a),u=t(7),l=t(5),d=t(0),j=Object(c.memo)((function(e){var n=e.Name,t=e.Description,c=e.DescriptionDetail;e.Picture;return console.log("load scene"),t||(t=c),Object(d.jsxs)("li",{className:"scene",children:[Object(d.jsx)("h2",{children:n}),Object(d.jsx)("hr",{}),Object(d.jsx)("p",{className:"description",children:t})]})})),h=[["\u81fa\u5317\u5e02","Taipei"],["\u65b0\u5317\u5e02","NewTaipei"],["\u6843\u5712\u5e02","Taoyuan"],["\u81fa\u4e2d\u5e02","Taichung"],["\u81fa\u5357\u5e02","Tainan"],["\u9ad8\u96c4\u5e02","Kaohsiung"],["\u57fa\u9686\u5e02","Keelung"],["\u65b0\u7af9\u5e02","Hsinchu"],["\u65b0\u7af9\u7e23","HsinchuCounty"],["\u82d7\u6817\u7e23","MiaoliCounty"],["\u5f70\u5316\u7e23","ChanghuaCounty"],["\u5357\u6295\u7e23","NantouCounty"],["\u96f2\u6797\u7e23","YunlinCounty"],["\u5609\u7fa9\u7e23","ChiayiCounty"],["\u5609\u7fa9\u5e02","Chiayi"],["\u5c4f\u6771\u7e23","PingtungCounty"],["\u5b9c\u862d\u7e23","YilanCounty"],["\u82b1\u84ee\u7e23","HualienCounty"],["\u81fa\u6771\u7e23","TaitungCounty"],["\u91d1\u9580\u7e23","KinmenCounty"],["\u6f8e\u6e56\u7e23","PenghuCounty"],["\u9023\u6c5f\u7e23","LienchiangCounty"]];function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot";return t=t+(e?"/"+e+"?":"?")+"$top=30&$skip="+n+"&$format=JSON"}var p=function(e,n){switch(n.type){case"PREP_FETCH":return Object(s.a)(Object(s.a)({},e),{},{isError:!1,isLoading:!0});case"INI_FETCH":return Object(s.a)(Object(s.a)({},e),{},{scenes:n.payload,isLoading:!1});case"CON_FETCH":return Object(s.a)(Object(s.a)({},e),{},{scenes:e.scenes.concat(n.payload),isLoading:!1});case"ERR_FETCH":return Object(s.a)(Object(s.a)({},e),{},{isError:!0});default:throw new Error("Unhandled action type")}},O=function(e){var n=e.setRequest;return console.log("Navbar"),Object(d.jsxs)("div",{id:"navbar",children:[Object(d.jsx)("h1",{id:"title",children:"\u81fa\u7063\u666f\u9ede\u700f\u89bd"}),Object(d.jsxs)("section",{id:"form",children:[Object(d.jsx)("button",{onClick:function(){n((function(e){return""})),document.getElementById("cities").value="\u9078\u64c7\u57ce\u5e02"},children:"\u5168\u90e8"}),Object(d.jsxs)("select",{id:"cities",defaultValue:"\u9078\u64c7\u57ce\u5e02",children:[Object(d.jsx)("option",{disabled:!0,children:"\u9078\u64c7\u57ce\u5e02"},"default"),h.map((function(e){return Object(d.jsx)("option",{value:e[1],onClick:function(){return n((function(n){return e[1]}))},children:e[0]},e[1])}))]})]})]})},f={scenes:[],isLoading:!1,isError:!1},y=function(e){var n=e.request,t=Object(c.useReducer)(p,f),i=Object(l.a)(t,2),r=i[0],a=i[1];return console.log("Scenelist"),Object(c.useEffect)((function(){var e=0,t=function(){var n=Object(u.a)(o.a.mark((function n(t){var i,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"PREP_FETCH"}),n.prev=1,n.next=4,fetch(b(t,e));case 4:return i=n.sent,n.next=7,i.json();case 7:r=n.sent,a(e?{type:"CON_FETCH",payload:r}:{type:"INI_FETCH",payload:r}),r.length<30&&window.removeEventListener("scroll",c),e+=30,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),a({type:"ERR_FETCH"});case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}(),c=function(){Math.round(window.innerHeight+window.scrollY)>=document.body.offsetHeight&&t(n)};return t(n),window.addEventListener("scroll",c),function(){console.log("cleanup"),window.removeEventListener("scroll",c)}}),[n]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("ul",{className:"scenelist",children:[r.scenes.map((function(e){return Object(d.jsx)(j,Object(s.a)({},e),e.ID)})),r.isLoading?Object(d.jsx)("div",{id:"loading",children:"Loading..."}):Object(d.jsx)("div",{})]})})},g=function(){var e=Object(c.useState)(""),n=Object(l.a)(e,2),t=n[0],i=n[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(O,{setRequest:i}),Object(d.jsx)(y,{request:t})]})};r.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.79b4a2f6.chunk.js.map