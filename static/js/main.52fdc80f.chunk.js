(this["webpackJsonptaiwan-scene-searchup"]=this["webpackJsonptaiwan-scene-searchup"]||[]).push([[0],{12:function(e,n,t){},15:function(e,n,t){"use strict";t.r(n);var c=t(2),s=t(6),i=t.n(s),r=(t(12),t(1)),o=t(4),a=t.n(o),u=t(7),l=t(5),d=t(0),j=Object(c.memo)((function(e){var n=e.Name,t=e.Description,c=e.DescriptionDetail;e.Picture;return console.log("load scene"),t||(t=c),Object(d.jsxs)("li",{className:"scene",children:[Object(d.jsx)("h2",{children:n}),Object(d.jsx)("hr",{}),Object(d.jsx)("p",{className:"description",children:t})]})})),h=[["\u81fa\u5317\u5e02","Taipei"],["\u65b0\u5317\u5e02","NewTaipei"],["\u6843\u5712\u5e02","Taoyuan"],["\u81fa\u4e2d\u5e02","Taichung"],["\u81fa\u5357\u5e02","Tainan"],["\u9ad8\u96c4\u5e02","Kaohsiung"],["\u57fa\u9686\u5e02","Keelung"],["\u65b0\u7af9\u5e02","Hsinchu"],["\u65b0\u7af9\u7e23","HsinchuCounty"],["\u82d7\u6817\u7e23","MiaoliCounty"],["\u5f70\u5316\u7e23","ChanghuaCounty"],["\u5357\u6295\u7e23","NantouCounty"],["\u96f2\u6797\u7e23","YunlinCounty"],["\u5609\u7fa9\u7e23","ChiayiCounty"],["\u5609\u7fa9\u5e02","Chiayi"],["\u5c4f\u6771\u7e23","PingtungCounty"],["\u5b9c\u862d\u7e23","YilanCounty"],["\u82b1\u84ee\u7e23","HualienCounty"],["\u81fa\u6771\u7e23","TaitungCounty"],["\u91d1\u9580\u7e23","KinmenCounty"],["\u6f8e\u6e56\u7e23","PenghuCounty"],["\u9023\u6c5f\u7e23","LienchiangCounty"]];function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot";return t=t+(e?"/"+e+"?":"?")+"$top=30&$skip="+n+"&$format=JSON"}var O=function(e,n){switch(n.type){case"PREP_FETCH":return Object(r.a)(Object(r.a)({},e),{},{isError:!1,isLoading:!0});case"INI_FETCH":return window.scrollTo(0,0),console.log("INI_FETCH"),Object(r.a)(Object(r.a)({},e),{},{scenes:n.newScenes,isLoading:!1});case"CON_FETCH":return console.log("CON_FETCH"),Object(r.a)(Object(r.a)({},e),{},{scenes:e.scenes.concat(n.newScenes),isLoading:!1});case"ERR_FETCH":return console.log("ERR_FETCH"),Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isError:n.statusText});default:throw new Error("Unhandled action type")}},g=function(e){var n=e.setRequest;return console.log("Navbar"),Object(d.jsxs)("div",{id:"navbar",children:[Object(d.jsx)("h1",{id:"title",children:"\u81fa\u7063\u666f\u9ede\u700f\u89bd"}),Object(d.jsxs)("section",{id:"form",children:[Object(d.jsx)("button",{onClick:function(){n((function(e){return""})),document.getElementById("cities").value="\u9078\u64c7\u57ce\u5e02"},children:"\u5168\u90e8"}),Object(d.jsxs)("select",{id:"cities",defaultValue:"\u9078\u64c7\u57ce\u5e02",onChange:function(){var e=document.getElementById("cities");n((function(n){return e.value}))},children:[Object(d.jsx)("option",{disabled:!0,children:"\u9078\u64c7\u57ce\u5e02"},"default"),h.map((function(e){return Object(d.jsx)("option",{value:e[1],onClick:function(){return n((function(n){return e[1]}))},children:e[0]},e[1])}))]})]})]})},p={scenes:[],isLoading:!1,isError:!1},f=function(e){var n=e.request,t=Object(c.useReducer)(O,p),s=Object(l.a)(t,2),i=s[0],o=s[1];return console.log("Scenelist"),Object(c.useEffect)((function(){var e=0,t=function(){var n=Object(u.a)(a.a.mark((function n(t){var s,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o({type:"PREP_FETCH"}),window.removeEventListener("scroll",c),console.log(t,e),n.next=5,fetch(b(t,e));case 5:return s=n.sent,n.next=8,s.json();case 8:i=n.sent,s.status<400?(o(e?{type:"CON_FETCH",newScenes:i}:{type:"INI_FETCH",newScenes:i}),30===i.length&&window.addEventListener("scroll",c),e+=30):o({type:"ERR_FETCH",statusText:s.statusText});case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){Math.round(window.innerHeight+window.scrollY)>=document.body.offsetHeight&&t(n)};return t(n),window.addEventListener("scroll",c),function(){console.log("cleanup"),window.removeEventListener("scroll",c)}}),[n]),Object(d.jsx)(d.Fragment,{children:i.isError?Object(d.jsxs)("p",{id:"error",children:["Error: ",i.isError]}):Object(d.jsxs)("ul",{className:"scenelist",children:[i.scenes.map((function(e){return Object(d.jsx)(j,Object(r.a)({},e),e.ID)})),i.isLoading&&Object(d.jsx)("div",{id:"loading",children:"Loading..."})]})})},C=function(){var e=Object(c.useState)(""),n=Object(l.a)(e,2),t=n[0],s=n[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(g,{setRequest:s}),Object(d.jsx)(f,{request:t})]})};i.a.render(Object(d.jsx)(C,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.52fdc80f.chunk.js.map